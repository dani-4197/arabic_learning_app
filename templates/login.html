{% extends "base.html" %}

{% block title %}Login - Arabic Learning App{% endblock %}

{% block content %}
<div class="auth-container">
    <div class="auth-box">
        <h1 class="auth-title">
            <span class="arabic-text" style="font-size: 2rem;">مرحباً</span>
            <span>Welcome</span>
        </h1>
        
        <!-- Tab Selection -->
        <div class="auth-tabs">
            <button class="auth-tab active" onclick="showTab('login')">Login</button>
            <button class="auth-tab" onclick="showTab('register')">Register</button>
        </div>

        <!-- Login Form -->
        <form id="login-form" class="auth-form" method="POST" action="{{ url_for('login') }}">
            <div class="form-group">
                <label for="login-username">Username</label>
                <input 
                    type="text" 
                    id="login-username" 
                    name="username" 
                    class="form-input"
                    required
                    autocomplete="username"
                    placeholder="Enter your username"
                >
            </div>

            <div class="form-group">
                <label for="login-password">Password</label>
                <input 
                    type="password" 
                    id="login-password" 
                    name="password" 
                    class="form-input"
                    required
                    autocomplete="current-password"
                    placeholder="Enter your password"
                >
            </div>

            <button type="submit" class="btn btn-primary btn-full">Login</button>
        </form>

        <!-- Register Form -->
        <form id="register-form" class="auth-form" method="POST" action="{{ url_for('register') }}" style="display: none;">
            <div class="form-group">
                <label for="register-username">Username</label>
                <input 
                    type="text" 
                    id="register-username" 
                    name="username" 
                    class="form-input"
                    required
                    minlength="4"
                    maxlength="20"
                    autocomplete="username"
                    placeholder="4-20 characters"
                >
                <small class="form-help">Must be 4-20 characters</small>
            </div>

            <div class="form-group">
                <label for="register-password">Password</label>
                <input 
                    type="password" 
                    id="register-password" 
                    name="password" 
                    class="form-input"
                    required
                    minlength="8"
                    autocomplete="new-password"
                    placeholder="Enter password"
                >
                <small class="form-help">Min 8 characters, 1 uppercase, 1 number</small>
            </div>

            <div class="form-group">
                <label for="confirm-password">Confirm Password</label>
                <input 
                    type="password" 
                    id="confirm-password" 
                    name="confirm_password" 
                    class="form-input"
                    required
                    autocomplete="new-password"
                    placeholder="Re-enter password"
                >
            </div>

            <button type="submit" class="btn btn-primary btn-full">Register</button>
        </form>

        <div class="auth-footer">
            <p class="text-muted">Start your Arabic learning journey today!</p>
        </div>
    </div>
</div>

<script>
function showTab(tab) {
    const loginForm = document.getElementById('login-form');
    const registerForm = document.getElementById('register-form');
    const tabs = document.querySelectorAll('.auth-tab');
    
    if (tab === 'login') {
        loginForm.style.display = 'block';
        registerForm.style.display = 'none';
        tabs[0].classList.add('active');
        tabs[1].classList.remove('active');
    } else {
        loginForm.style.display = 'none';
        registerForm.style.display = 'block';
        tabs[0].classList.remove('active');
        tabs[1].classList.add('active');
    }
}

// Password validation for registration
document.getElementById('register-form')?.addEventListener('submit', function(e) {
    const password = document.getElementById('register-password').value;
    const confirm = document.getElementById('confirm-password').value;
    
    if (password !== confirm) {
        e.preventDefault();
        alert('Passwords do not match!');
        return false;
    }
    
    // Check password requirements
    if (!/[A-Z]/.test(password)) {
        e.preventDefault();
        alert('Password must contain at least one uppercase letter');
        return false;
    }
    
    if (!/[0-9]/.test(password)) {
        e.preventDefault();
        alert('Password must contain at least one number');
        return false;
    }
});
</script>
{% endblock %}
